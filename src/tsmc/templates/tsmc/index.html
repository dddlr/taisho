<!DOCTYPE html>
<meta charset="utf-8">
<h1>Middle Chinese–Duanfen Taishanese database</h1>
<p>
  This database aims to compare Duanfen Taishanese pronunciations of characters
  with their Middle Chinese rime table data. Since the pronunciations were
  elicited from them directly, they will virtually all be literary
  pronunciations (used in reading out written text, usually in compounds)
  instead of colloquial pronunciations (used in informal speech, usually in
  monosyllabic words).
</p>
<p>
  Both my parents are from Duanfen (born late 1960s) in Duanfen.
</p>
<p>
  Middle Chinese data based on the 1981 edition of
  <a href="https://web.archive.org/web/20180529082256/http://fdjpkc.fudan.edu.cn/_upload/article/files/aa/1a/5156f64f4ce88a2ee0499adfd1d7/9d820868-2b1c-4ec1-8013-dc9062afb641.pdf<Paste>">方言調查字表（修訂本）</a>.
  Some notes on how the Middle Chinese data has been transferred to this
  database:
</p>
<ul>
  <li>
    Whereas the source marks whether a character is from the Guangyun (廣韻),
    Jiyun (集韻), both (via parentheses and/or asterisks), in this database
    these distinctions are ignored. However, characters that appear only in
    Jiyun have (*) in their notes. Characters that are from neither Guangyun
    nor Jiyun (notated with square brackets in the source) have this symbol in
    their notes [].
  </li>
  <li>
    The use of smaller text beside the character, used in the source as
    examples of a character’s use (e.g. to clarify a character’s meaning)
    is represented here as the Note column.
  </li>
  <li>
    If a character has more than one form (shown in parentheses in the source),
    only the character outside brackets is used, due to Unicode issues and lack
    of significance in the context of this website.
  </li>
  <li>
    If a character has a more common, similar modern variant (e.g. 朵 instead
    of 朶, 群 instead of 羣), the character is changed to the modern variant
    without comment. That said, if the modern variant is drastically different
    (e.g. 葫蘆 instead of 瓠盧), the modern variant is included in the notes
    within {curly brackets} instead. A question mark (?) is used for
    uncertainty.
  </li>
</ul>
<p>Note that the rising changed tone is not taken into account.</p>
<form action="{% url 'tsmc:search' %}" method="get">
  <label for="char">Character(s):</label>
    <input id="char" name="char" placeholder="e.g. 中文" type="text"><br>
  <label for="initial">Initial:</label>
    <input id="initial" maxlength="1" name="initial" placeholder="e.g. 疑" type="text"><br>
  <label for="final">Final:</label>
    <input id="final" maxlength="1" name="final" placeholder="e.g. 歌" type="text"><br>
  <label for="tone">Tone:</label>
    <input id="tone" maxlength="1" name="tone" placeholder="e.g. 平" type="text"><br>
  <label for="openness">Openness:</label>
    <input id="openness" maxlength="1" name="openness" placeholder="e.g. 開" type="text"><br>
  <label for="division">Division (1 to 4):</label>
    <input id="division" maxlength="1" name="division" min="1" max="4" type="number"><br>
  <label for="note">Note:</label>
    <input id="note" maxlength="10" name="note" type="text"><br>
  <input type="submit" value="Search">
</form>
{% if length %}
<p>{{ length }} results found.</p>
{% endif %}
{% if character_list.paginator %}
  {% if character_list.has_previous %}
    <a href="{{ paginator_path }}page={{ character_list.previous_page_number }}">Previous page</a>
  {% else %}
    Previous page
  {% endif %}
  {% if character_list.has_next %}
    <a href="{{ paginator_path }}page={{ character_list.next_page_number }}">Next page</a>
  {% else %}
    Next page
  {% endif %}
{% else %}
<p>You haven’t searched for anything yet. Returning some arbitrarily-chosen entries.</p>
{% endif %}
{% if character_list %}
  <table>
    <thead>
      <th>Char.</th>
      <th>Initial</th>
      <th>Final</th>
      <th>Tone</th>
      <th>Division</th>
      <th>Openness</th>
      <th>Note</th>
      <th>Taishanese</th>
    </thead>
    <tbody>
      {% for character in character_list %}
        {% with len=character.taishanese_set.all.count %}
          {% if character.taishanese_set.all %}
            {% for taishanese in character.taishanese_set.all %}
              <tr>
                {% if forloop.counter == 1 %}
                  <td rowspan="{{ len }}"><a href="{% url 'tsmc:character' character.id %}">{{ character.char }}</a></td>
                  <td rowspan="{{ len }}">{{ character.initial }}</td>
                  <td rowspan="{{ len }}">{{ character.final }}</td>
                  <td rowspan="{{ len }}">{{ character.tone }}</td>
                  <td rowspan="{{ len }}">{{ character.division }}</td>
                  <td rowspan="{{ len }}">{{ character.openness }}</td>
                  <td rowspan="{{ len }}">{{ character.note }}</td>
                {% endif %}
                <td>{{ taishanese }} ({{ taishanese.source }})</td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td><a href="{% url 'tsmc:character' character.id %}">{{ character.char }}</a></td>
              <td>{{ character.initial }}</td>
              <td>{{ character.final }}</td>
              <td>{{ character.tone }}</td>
              <td>{{ character.division }}</td>
              <td>{{ character.openness }}</td>
              <td>{{ character.note }}</td>
              <td>{{ taishanese }}</td>
            </tr>
          {% endif %}
        {% endwith %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No characters found :(</p>
{% endif %}
